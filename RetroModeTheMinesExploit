-- this is test version , floor 1 soon
local workspace = game:GetService("Workspace")
local players = game:GetService("Players")
local runService = game:GetService("RunService")
local lighting = game:GetService("Lighting")
local starterGui = game:GetService("StarterGui")
local userInputService = game:GetService("UserInputService")

local player = players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local camera = workspace.CurrentCamera

local InfiniteJumpEnabled = true
userInputService.JumpRequest:Connect(function()
    if InfiniteJumpEnabled then
        player.Character:FindFirstChildOfClass('Humanoid'):ChangeState("Jumping")
    end
end)

local function handleWorkspaceObjects(object)
    if object.Name == "TripmineStuff" and object:IsA("Folder") then
        object:Destroy()
    elseif object.Name == "Giggles" and object:IsA("Folder") then
        object:Destroy()
    elseif object.Name == "Damage" and object:IsA("Folder") then
        object:Destroy()
    elseif object.Name == "RushNew" and object:IsA("Part") then
        object:Destroy()
    elseif object.Name == "AmbushNew" and object:IsA("Part") then
        object:Destroy()
    elseif object.Name == "Eyes" and object:IsA("Model") then
        object:Destroy()
    elseif object.Name == "CanTripmine" and object:IsA("BoolValue") then
        object.Value = false
    elseif object.Name == "Tripmine" and object:IsA("Script") then
        object:Destroy()
    elseif object.Name == "Damage_Script" and object:IsA("Script") then
        object:Destroy()
    elseif object.Name == "SEEKING WALL!!!!" and object:IsA("Part") then
        object:Destroy()
    elseif object.Name == "InitialDrakos" or object.Name == "SpawnDraco" then
        object:Destroy()
    elseif object.Name == "Kill" and object:IsA("Folder") then
        object:Destroy()
    elseif object.Name == "d1" and object:IsA("Part") then
        object:Destroy()
    end
end

local mainUI = playerGui:FindFirstChild("MainUI")
if mainUI then
    if mainUI:FindFirstChild("InitialDrakos") then
        mainUI.InitialDrakos:Destroy()
    end
end

local starterMainUI = starterGui:FindFirstChild("MainUI")
if starterMainUI then
    if starterMainUI:FindFirstChild("InitialDrakos") then
        starterMainUI.InitialDrakos:Destroy()
    end
    if starterMainUI:FindFirstChild("SpawnDraco") then
        starterMainUI.SpawnDraco:Destroy()
    end
end

for _, descendant in ipairs(workspace:GetDescendants()) do
    handleWorkspaceObjects(descendant)
end

workspace.DescendantAdded:Connect(function(newDescendant)
    handleWorkspaceObjects(newDescendant)
end)

runService.Heartbeat:Connect(function()
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        local humanoid = player.Character:FindFirstChild("Humanoid")
        humanoid.WalkSpeed = 75
        humanoid.JumpPower = 50
    end
end)

local function enableFullbright()
    lighting.Brightness = 2
    lighting.ClockTime = 12
    lighting.FogEnd = 1e6
    lighting.GlobalShadows = false
    lighting.OutdoorAmbient = Color3.new(1, 1, 1)
    lighting.Ambient = Color3.new(1, 1, 1)
    lighting.ExposureCompensation = 0
    lighting.Skybox = nil
end

enableFullbright()
lighting:GetPropertyChangedSignal("Brightness"):Connect(enableFullbright)
lighting:GetPropertyChangedSignal("FogEnd"):Connect(enableFullbright)
lighting:GetPropertyChangedSignal("GlobalShadows"):Connect(enableFullbright)
lighting:GetPropertyChangedSignal("OutdoorAmbient"):Connect(enableFullbright)
lighting:GetPropertyChangedSignal("Ambient"):Connect(enableFullbright)
lighting:GetPropertyChangedSignal("Skybox"):Connect(enableFullbright)

camera.FieldOfView = 120

local function highlightButton()
    for _, descendant in ipairs(workspace:GetDescendants()) do
        if descendant.Name == "Button" and descendant:IsA("Part") then
            descendant.Color = Color3.new(1, 0, 0)

            local billboardGui = Instance.new("BillboardGui")
            billboardGui.Parent = descendant
            billboardGui.Adornee = descendant
            billboardGui.Size = UDim2.new(0, 200, 0, 50)
            billboardGui.StudsOffset = Vector3.new(0, 5, 0)

            local textLabel = Instance.new("TextLabel")
            textLabel.Parent = billboardGui
            textLabel.Text = "Button"
            textLabel.TextColor3 = Color3.new(1, 1, 1)
            textLabel.TextSize = 24
            textLabel.BackgroundTransparency = 1
        end
    end
end

highlightButton()
